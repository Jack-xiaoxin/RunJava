
### 安全加密技术

**常见的信息加密技术分为三类：单项散列加密、对称加密和非对称加密。**

####  单项散列加密

单项散列加密是指通过对不同输入长度的信息进行散列计算，得到固定长度的输出，这个散列计算过程是单向的。为了加强单向散列计算的安全性，可以给散列算法加盐，salt相当于加密的密钥，增加破解难度。

**单向散列函数特点：**

>   对任意长度的消息散列值是定长的。

>   散列计算速度快，非常高效。

>   明文不同，散列加密后的密文一定不同；明文相同，散列加密后密文一定相同。

>   具备单向性，无法逆推计算。

>   单向散列的经典算法有 MD5、SHA、RSA-SHA等。

#### 对称加密

对称加密是最快速、最简单的一种加密方式，加密（encryption）与解密（decryption）用的是同样的密钥（secret
key）。对称加密有很多种算法，由于它效率很高，所以被广泛使用在很多加密协议的核心当中。

对称加密通常使用的是相对较小的密钥，一般小于256
bit。因为密钥越大，加密越强，但加密与解密的过程越慢。如果你只用1
bit来做这个密钥，那黑客们可以先试着用0来解密，不行的话就再用1解；但如果你的密钥有1
MB大，黑客们可能永远也无法破解，但加密和解密的过程要花费很长的时间。密钥的大小既要照顾到安全性，也要照顾到效率，是一个trade-off。

常见的对称加密算法：DES，AES，3DES等。

#### 非对称加密

非对称加密为数据的加密与解密提供了一个非常安全的方法，它使用了一对密钥，公钥（public
key）和私钥（private
key）。私钥只能由一方安全保管，不能外泄，而公钥则可以发给任何请求它的人。非对称加密使用这对密钥中的一个进行加密，而解密则需要另一个密钥（公钥加密，私钥解密；私钥加密，公钥解密）。常见的非对称加密算法加密和签名算法：RSA、DSA等。

由于非对称加密算法的运行速度比对称加密算法的速度慢很多，当需要加密大量的数据时，一般采用对称加密算法，提高加解密速度。
对称加密算法不能实现签名，因此签名只能非对称算法。

对称加密加密与解密使用的是同样的密钥，所以速度快，但由于需要将密钥在网络传输，所以安全性不高。非对称加密使用了一对密钥，公钥与私钥，所以安全性高，但加密与解密速度慢。
根据对称加密和非对称加密的特点，在实际的操作过程中，采用的方式是：采用非对称加密算法管理对称算法的密钥，然后用对称加密算法加密数据，这样就集成了两类加密算法的优点，既实现了加密速度快的优点，又实现了安全方便管理密钥的优点。

### 网络攻击

####  SYN Flood攻击

**SYNFlood攻击：**
给服务器发了一个SYN后，就下线了，于是服务器需要默认等63s才会断开连接，这样，攻击者就可以把服务器的syn连接的队列耗尽，让正常的连接请求不能处理。

Linux下给了一个叫tcp_syncookies的参数来应对这个事：当SYN队列满了后，TCP会通过源地址端口、目标地址端口和时间戳打造出一个特别的Sequence
Number发回去（又叫cookie），如果是攻击者则不会有响应，如果是正常连接，则会把这个
SYN Cookie发回来，然后服务端可以通过cookie建连接（即使不在SYN队列中）。

请注意，请**先千万别用tcp_syncookies来处理正常的大负载的连接的情况。**
因为，synccookies是妥协版的TCP协议，并不严谨。对于正常的请求，所以应该调整三个TCP参数：第一个是tcp_synack_retries，可以用来减少重试次数；第二个是tcp_max_syn_backlog，可以增大SYN连接数；第三个是tcp_abort_on_overflow，处理不过来干脆就直接拒绝连接了。

#### 9.6.2.2 DDOS攻击

DDoS攻击是Distributed Denial of
Service的缩写，即不法黑客组织通过控制服务器等资源，发动对包括国家骨干网络、重要网络设施、政企或个人网站在内的互联网上任一目标

的攻击，致使目标服务器断网，最终停止提供服务。

预防1：**高防服务器。**
主要是指能独立硬防御 50Gbps以上的服务器，能够帮助网站拒绝服务攻击，定期扫描网络主节点等。

**预防2**：DDoS清洗会对用户请求数据进行实时监控，及时发现DOS攻击等异常流量，在不影响正常业务开展的情况下清洗掉这些异常流量。

**预防3：CDN 加速。**
在现实中，CDN服务将网站访问流量分配到了各个节点中，这样一方面隐藏网站的真实IP，另一方面即使遭遇 DDoS 攻击，也可以将流量分散到各个节点中，防止源站崩溃。


####  SQL注入

所谓SQL注入，就是通过把SQL命令插入到Web表单提交或输入域名或页面请求的查询字符串，最终达到欺骗服务器执行恶意的SQL命令。

**预防1：加密处理**。将用户登录名称、密码等数据加密保存。加密用户输入的数据，然后再将它与数据库中保存的数据比较，这相当于对用户输入的数据进行了“消毒”处理，用户输入的数据不再对数据库有任何特殊的意义，从而也就防止了攻击者注入SQL命令。

**预防**2：**确保数据库安全**。只给访问数据库的web应用功能所需的最低的权限，撤销不必要的公共许可

**预防3：输入验证**。检查用户输入的合法性，确信输入的内容只包含合法的数据。数据检查应当在客户端和服务器端都执行之所以要执行服务器端验证，是为了弥补客户端验证机制脆弱的安全性。

####  XSS攻击

XSS攻击全称为跨站脚本攻击(Cross Site
Scripting)。它的原理是攻击者向有XSS漏洞的网站中插入恶意的HTML代码，当其它用户浏览该网站时，这段HTML代码会自动执行，从而达到攻击的目的。比如，盗取用户Cookie、破坏页面结构、重定向到其它网站等。

**XSS的攻击方式分为两种**

反射式：点击恶意URL，恶意脚本会执行。

持久性XSS攻击：黑客提交含有恶意脚本的请求，保存在被攻击的web站点的数据库中，用户浏览网页的时候，恶意脚本被包含在正常页面中，达到攻击的目的。

**XSS的防御措施**

编码：对用户输入的数据进行HTML Entity编码

过滤：移除用户上传的DOM属性，如onerror等，移除用户上传的style节点，script节点，iframe节点等。

校正：避免直接对HTML Entity编码，使用DOM Prase转换，校正不配对的DOM标签。

#### CSRF攻击

CSRF全称为跨站请求伪造（Cross-site request
forgery），是一种网络攻击方式，也被称为 one-click attack 或者 session riding。

![](media/9e9dac1cdbd06c2c5c8ce5fc7d7bc586.png)

从上图可以看出，要完成一次CSRF攻击，受害者必须依次完成两个步骤：

>   **登录受信任网站A，并在本地生成Cookie。**

>   **在不登出A的情况下，访问危险网站B。**

CSRF攻击是源于WEB的隐式身份验证机制。WEB的身份验证机制虽然可以保证一个请求是来自于某个用户的浏览器，但却无法保证该请求是用户批准发送的！
